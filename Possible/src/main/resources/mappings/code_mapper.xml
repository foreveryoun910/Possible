<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yedam.possable.app.common.code.mapper.CodeMapper">
    <resultMap id="masterCode" type="CodeMasterVO">
        <id property="code" column="code"/>
        <result property="name" column="name"/>
    </resultMap>
    <resultMap id="subCode" type="CodeSubVO">
        <id property="code" column="code"/>
        <result property="name" column="name"/>
        <association property="masterCode"
                     column="master_code"
                     resultMap="masterCode"
                     columnPrefix="master_"
                     javaType="java.lang.String"/>
    </resultMap>
    <resultMap id="brand" type="BrandCodeVO">
        <id property="code" column="code" />
        <result property="name" column="name" />
    </resultMap>
    <resultMap id="model" type="ModelCodeVO">
        <id property="code" column="code" />
        <result property="name" column="name" />
        <result property="img" column="img" />
        <result property="segCode" column="seg_code" />
        <association property="brandCode"
                     column="brand_code"
                     columnPrefix="brand_"
                     resultMap="brand"
                     javaType="java.lang.String" />
    </resultMap>
    <resultMap id="trim" type="TrimCodeVO">
        <id property="code" column="code" />
        <result property="name" column="name" />
        <result property="fuel" column="fuel"/>
        <association property="modelCodeVO"
                     column="model_code"
                     resultMap="model"
                     columnPrefix="model_"
                     javaType="string"/>
    </resultMap>

    <select id="getMasterCodes" resultType="CodeMasterVO">
        SELECT *
        FROM code_master
    </select>

    <select id="getMasterCodeByValue" resultType="CodeMasterVO">
        SELECT *
        FROM code_master
        WHERE code = #{code}
    </select>

    <select id="getMasterCodeByName" resultType="CodeMasterVO">
        SELECT *
        FROM code_master
        WHERE name = #{name}
    </select>

    <select id="getCodesByParentCode" resultType="CodeSubVO">
        SELECT *
        FROM code_sub
        WHERE master_code = #{parentCode}
    </select>
    <select id="getCodeByName" resultType="CodeSubVO">
        SELECT *
        FROM code_sub
        WHERE name = #{name}
    </select>
    <select id="getCodeByValue" resultType="CodeSubVO">
        SELECT *
        FROM code_sub
        WHERE code = #{code}
    </select>

    <select id="getBrandList" resultType="BrandCodeVO">
        SELECT *
        FROM brand_code
    </select>
    <select id="getBrand" resultType="brandCodeVO">
        SELECT *
        FROM brand_code
        WHERE code = #{code}
    </select>
    <select id="getModelList" resultType="ModelCodeVO">
        SELECT *
        FROM model_code
        <if test="brandCode != null">
            WHERE brand_code = #{brandCode}
        </if>
    </select>
    <select id="getModel" resultType="ModelCodeVO">
        SELECT *
        FROM model_code
        WHERE code = #{code}
    </select>
    <select id="getTrimList" resultType="TrimCodeVO">
        SELECT *
        FROM trim_code
        <!--        <if test="modelCode != null">-->
        <!--            WHERE model_code = #{modelCode}-->
        <!--        </if>-->
    </select>
    <select id="getTrim" resultType="TrimCodeVO">
        SELECT *
        FROM trim_code
        WHERE code = #{code}
    </select>

    <select id="getBrandByName" resultType="BrandCodeVO">
        SELECT *
        FROM brand_code
        WHERE name = #{name}
    </select>

    <select id="getModelByName" resultType="ModelCodeVO">
        SELECT *
        FROM model_code
        WHERE name = #{name}
    </select>

    <select id="getTrimByName" resultType="TrimCodeVO">
        SELECT *
        FROM trim_code
        WHERE name = #{name}
    </select>
</mapper>
